525
00:19:34,700 --> 00:19:36,133
來展示另一個選擇

526
00:19:36,133 --> 00:19:39,200
我在測試 HTTP時常常傾向使用的

527
00:19:39,200 --> 00:19:39,900
客戶端

528
00:19:39,900 --> 00:19:42,133
這種策略將保持我們的

529
00:19:42,133 --> 00:19:43,333
生產代碼整潔

530
00:19:43,333 --> 00:19:45,900
並使我們的測試更解耦於

531
00:19:45,900 --> 00:19:47,033
生產代碼

532
00:19:47,033 --> 00:19:49,333
絕對，我們不會模仿，而是將使用

533
00:19:49,333 --> 00:19:50,633
stubbing

534
00:19:50,633 --> 00:19:52,933
攔截網絡請求並

535
00:19:52,933 --> 00:19:53,733
返回

536
00:19:53,733 --> 00:19:56,000
stubbed 值，Foundation framework中有一種類型

537
00:19:56,000 --> 00:19:57,600
可以幫助我們

538
00:19:57,600 --> 00:19:58,133
實現這點

539
00:19:58,133 --> 00:20:01,266
URLProtocol APIs，對

540
00:20:01,266 --> 00:20:05,600
或者之前稱為 NSURLProtocol

541
00:20:05,600 --> 00:20:06,933
讓我們看看這個東西是

542
00:20:06,933 --> 00:20:09,200
如何運作的。每次我們執行一個 URL

543
00:20:09,200 --> 00:20:10,866
請求

544
00:20:10,866 --> 00:20:13,033
幕後的是

545
00:20:13,033 --> 00:20:14,933
有一個 URL 加載系統

546
00:20:14,933 --> 00:20:17,600
處理 URL 請求，作為

547
00:20:17,600 --> 00:20:18,300
這個 URL

548
00:20:18,300 --> 00:20:20,633
加載系統的一部分，有一種稱為

549
00:20:20,633 --> 00:20:21,733
URLProtocol

550
00:20:21,733 --> 00:20:23,733
的類別，它是繼承自

551
00:20:23,733 --> 00:20:25,033
NSObject的抽象類別